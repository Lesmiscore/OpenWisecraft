import java.net.*

def env=System.env
ext["buildId"]={
	if(env.containsKey("CI_BUILD_ID"))env["CI_BUILD_ID"]
	else if(env.containsKey["TRAVIS_JOB_NUMBER"])env["TRAVIS_JOB_NUMBER"]
	else if(env.containsKey["BUILD_BUILDID"])env["BUILD_BUILDID"]
	else null
}
ext["buildRef"]={
	if(env.containsKey("CI_BUILD_REF_NAME"))env["CI_BUILD_REF_NAME"]
	else if(env.containsKey["TRAVIS_TAG"])env["TRAVIS_TAG"]
	else if(env.containsKey["TRAVIS_COMMIT"])env["TRAVIS_COMMIT"]
	else if(env.containsKey["BUILD_SOURCEBRANCHNAME"])env["BUILD_SOURCEBRANCHNAME"]
	else null
}
ext["runnerId"]={
	if(env.containsKey("CI_RUNNER_ID"))env["CI_RUNNER_ID"]
	else InetAddress.getByName(new URL("http://checkip.amazonaws.com").openConnection().readLine()).hostName
}
ext["buildStage"]={
	if(env.containsKey("CI_BUILD_STAGE"))env["CI_BUILD_STAGE"]
	else null
}
ext["buildName"]={
	if(env.containsKey("CI_BUILD_NAME"))env["CI_BUILD_NAME"]
	else null
}
ext["builtOn"]={
	if(env.containsKey("GITLAB_CI"))"GitLab CI"
	else if(env.containsKey["TRAVIS"])"Travis CI"
	else "manual"
}
ext["pipeline"]={
	if(env.containsKey("CI_PIPELINE_ID"))env["CI_PIPELINE_ID"]
	else if(env.containsKey["TRAVIS_BUILD_NUMBER"])env["TRAVIS_BUILD_NUMBER"]
	else null
}

